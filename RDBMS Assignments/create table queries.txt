create database ecommerce;

create table Users (
id Integer primary key not null,
name varchar(255) not null,
email varchar(255) not null unique,
password varchar(255) not null check(char_length(password)>8)
);

create table Products(
id Integer primary key not null,
name varchar(255) not null
);

create table Product_details(
product_id Integer references Products(id),
color varchar(10),
price numeric(10,2)
);

create table orders(
id varchar(255) primary key not null check(char_length(id) between 8 and 10),
user_id Integer references Users(id),
date_od_order date
);

create table Order_details(
order_id varchar(255) references Orders(id),
product_id Integer references Products(id),
price Numeric(10,2)
);

create table Coupons(
id Integer primary key not null,
discount integer not null
);

create table Payments(
id Integer primary key not null,
coupon_id Integer references Coupons(id),
type varchar(255) not null,
status varchar(255) not null
);

create table transactions(
id Integer primary key not null,
order_id varchar(255) references Orders(id),
payment_id Integer references Payments(id)
);